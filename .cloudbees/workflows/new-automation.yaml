apiVersion: automation.cloudbees.io/v1alpha1
kind: workflow
name: new automation
on:
  push:
    branches:
      - main
jobs:
  build:
    steps:
      - name: Say hello
      - name: Say hello
      - name: Say hello
      - name: Say hello
      - name: Say hello
      - name: Say hello
  test1:
    steps:
      - name: Say hello
      - name: Say hello
      - name: Say hello
      - name: Say hello
  test2:
    steps:
      - name: Say hello3
        uses: docker://golang:1.20.3-alpine3.17
        shell: sh
        run: |
          echo "hello world3"
      - name: Say hello1
        uses: docker://golang:1.20.3-alpine3.17
        shell: sh
        run: |
          echo "hello world1"
      - name: Say hello2
        uses: docker://golang:1.20.3-alpine3.17
        shell: sh
        run: |
          echo "hello world2"
    needs:
      - test1
      - build
